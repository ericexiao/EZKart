<!DOCTYPE HTML>
<html>
	<head>
	<link rel ="stylesheet" href = "login.css" type="text/css">	
	 <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
	    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
	    <link rel="stylesheet" href="bootstrap/css/profile.css">

	    <!-- Latest compiled and minified JavaScript -->
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	    <script src="bootstrap/js/bootstrap.min.js"></script>

		<script type="text/javascript">
			function login() {
				var username = document.getElementById("user").value;
				var password = document.getElementById("password").value;
				if (username != "" && password != "") {
					document.getElementById("alert1thing").style.display = "none";
					if (window.XMLHttpRequest) { // Mozilla, Safari, ...
						httpRequest = new XMLHttpRequest();
						if (httpRequest.overrideMimeType) {
							httpRequest.overrideMimeType('text/xml');
						}	
					} else if (window.ActiveXObject) { // IE
						try {
							httpRequest = new ActiveXObject("Msxml2.XMLHTTP");
						} catch (e) {
							try {
								httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
							}
							catch (e) {}
						}
					}
					if (!httpRequest) {
						alert('Giving up. Cannot create an XMLHTTP instance');
						return false;
					}
					var url = "siteAdmin.php";
					httpRequest.open("POST", url, true);
					httpRequest.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
					httpRequest.send("username=" + username + "&password=" + password);
					if (httpRequest.readyState == 1) {
						document.getElementById("alert1").innerHTML = "Attempting Login";
					}
					httpRequest.onreadystatechange = function() {
						if (httpRequest.readyState == 4 && httpRequest.status == 200) {
							if (httpRequest.responseText == "login") {
								document.getElementById("alert1thing").style.display = "inline";
								document.getElementById("alert1").innerHTML = "Login Successful";
								window.location = "profile.php";
							} else if (httpRequest.responseText == "auth") {
								document.getElementById("alert1thing").style.display = "inline";
								document.getElementById("alert1").innerHTML = "Account not authenticated, please check your inbox.";
							} else {
								document.getElementById("alert1thing").style.display = "inline";
								document.getElementById("alert1").innerHTML = httpRequest.responseText;
							}
						}
					}
				} else {
					document.getElementById("alert1thing").style.display = "inline";
					document.getElementById("alert1").innerHTML = "Please fill all values";
				}
			}
		</script>
	</head>
	
	<body>
		<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand">Kartful</a>
    </div>
  </div>
</nav>

		<h3 id="title"> Login Portal </h3>
		
		<div  id="loginForm">
			<div id="alert1thing" style="display: none">
				<div class="alert alert-dismissible alert-danger">
				  <p id="alert1"></p>
				</div>
			</div>

			<label> Username: </label> <input type="text" id="user" onkeydown="if (event.keyCode == 13) { login();}"> <br> <br>
			<label> Password: </label> <input type="password" id="password" onkeydown="if (event.keyCode == 13) { login();}"> <br> <br>
			<button onclick="login()" class="btn btn-info"> Log In </button> <p></p>
		</div>
	</body> 